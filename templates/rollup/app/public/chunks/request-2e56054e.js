import{c6 as e,k as s}from"../main.js";let t;function r(r,n={}){let o=n.responseType;o?"json"!==o&&"text"!==o&&"blob"!==o&&"array-buffer"!==o&&(o="text"):o="json";const a=n&&n.signal;return delete n.signal,e.invokeStaticMessage("request",{url:r,options:n},{signal:a}).then((e=>{const a=e.data;let l,u,i,c;if(a&&!("json"!==o&&"text"!==o&&"blob"!==o||(l=new Blob([a]),"json"!==o&&"text"!==o||(t||(t=new FileReaderSync),u=t.readAsText(l),"json"!==o)))){try{i=JSON.parse(u||null)}catch(e){const t={...e,url:r,requestOptions:n};throw new s("request:server",e.message,t)}if(i.error){const e={...i.error,url:r,requestOptions:n};throw new s("request:server",i.error.message,e)}}switch(o){case"json":c=i;break;case"text":c=u;break;case"blob":c=l;break;default:c=a}return{data:c,requestOptions:n,ssl:e.ssl,url:r}}))}export{r as execute};
