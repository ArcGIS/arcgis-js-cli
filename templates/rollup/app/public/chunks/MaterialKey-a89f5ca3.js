import{k as t}from"../main.js";import{A as e,E as i,c as s}from"./Utils-b46864a6.js";function a(t){switch(t){case"above-along":case"below-along":case"center-along":return 1;default:return 0}}function r(t,e,s,a,r){switch(t){case i.FILL:return u.from(e,a);case i.LINE:return d.from(e,s);case i.MARKER:return c.from(e);case i.TEXT:return V.from(e);case i.LABEL:return p.from(e,r);default:throw new Error("Unable to createMaterialKey for unknown geometryType "+t)}}function n(t){switch(v.load(t).geometryType){case i.MARKER:return new c(t);case i.FILL:return new u(t);case i.LINE:return new d(t);case i.TEXT:return new V(t);case i.LABEL:return new p(t)}}class v{constructor(t){this._data=0,this._data=t}static load(t){const e=this.shared;return e.data=t,e}set data(t){this._data=t}get data(){return this._data}get geometryType(){return this.bits(8,11)}set geometryType(t){this.setBits(t,8,11)}get mapAligned(){return!!this.bit(20)}set mapAligned(t){this.setBit(20,t)}get sdf(){return!!this.bit(11)}set sdf(t){this.setBit(11,t)}get pattern(){return!!this.bit(12)}set pattern(t){this.setBit(12,t)}get textureBinding(){return this.bits(0,8)}set textureBinding(t){this.setBits(t,0,8)}get geometryTypeString(){switch(this.geometryType){case i.FILL:return"fill";case i.MARKER:return"marker";case i.LINE:return"line";case i.TEXT:return"text";case i.LABEL:return"label";default:throw new t("Unable to handle unknown geometryType: "+this.geometryType)}}setBit(t,e){const i=1<<t;e?this._data|=i:this._data&=~i}bit(t){return(this._data&1<<t)>>t}setBits(t,e,i){for(let s=e,a=0;s<i;s++,a++)this.setBit(s,0!=(t&1<<a))}bits(t,e){let i=0;for(let s=t,a=0;s<e;s++,a++)i|=this.bit(s)<<a;return i}hasVV(){return!1}setVV(t,e){}getVariation(){return{mapAligned:this.mapAligned,pattern:this.pattern,sdf:this.sdf}}getVariationHash(){return this._data&~(7&this.textureBinding)}}v.shared=new v(0);const o=t=>class extends t{get vvSizeMinMaxValue(){return 0!==this.bit(16)}set vvSizeMinMaxValue(t){this.setBit(16,t)}get vvSizeScaleStops(){return 0!==this.bit(17)}set vvSizeScaleStops(t){this.setBit(17,t)}get vvSizeFieldStops(){return 0!==this.bit(18)}set vvSizeFieldStops(t){this.setBit(18,t)}get vvSizeUnitValue(){return 0!==this.bit(19)}set vvSizeUnitValue(t){this.setBit(19,t)}hasVV(){return super.hasVV()||this.vvSizeMinMaxValue||this.vvSizeScaleStops||this.vvSizeFieldStops||this.vvSizeUnitValue}setVV(t,i){super.setVV(t,i);const a=function(t,i=!1){const a=e.SIZE_FIELD_STOPS|e.SIZE_MINMAX_VALUE|e.SIZE_SCALE_STOPS|e.SIZE_UNIT_VALUE,r=(t&(s.FIELD_TARGETS_OUTLINE|s.MINMAX_TARGETS_OUTLINE|s.SCALE_TARGETS_OUTLINE|s.UNIT_TARGETS_OUTLINE))>>>4;return i?a&r:a&~r}(t,i)&t;this.vvSizeMinMaxValue=!!(a&e.SIZE_MINMAX_VALUE),this.vvSizeFieldStops=!!(a&e.SIZE_FIELD_STOPS),this.vvSizeUnitValue=!!(a&e.SIZE_UNIT_VALUE),this.vvSizeScaleStops=!!(a&e.SIZE_SCALE_STOPS)}},h=t=>class extends t{get vvRotation(){return 0!==this.bit(15)}set vvRotation(t){this.setBit(15,t)}hasVV(){return super.hasVV()||this.vvRotation}setVV(t,i){super.setVV(t,i),this.vvRotation=!i&&!!(t&e.ROTATION)}},S=t=>class extends t{get vvColor(){return 0!==this.bit(13)}set vvColor(t){this.setBit(13,t)}hasVV(){return super.hasVV()||this.vvColor}setVV(t,i){super.setVV(t,i),this.vvColor=!i&&!!(t&e.COLOR)}},l=t=>class extends t{get vvOpacity(){return 0!==this.bit(14)}set vvOpacity(t){this.setBit(14,t)}hasVV(){return super.hasVV()||this.vvOpacity}setVV(t,i){super.setVV(t,i),this.vvOpacity=!i&&!!(t&e.OPACITY)}};class u extends(S(l(v))){static load(t){const e=this.shared;return e.data=t,e}static from(t,e){const s=this.load(0);return s.geometryType=i.FILL,e?s.dotDensity=!0:s.setVV(t,!1),s.data}getVariation(){return{...super.getVariation(),dotDensity:this.dotDensity,vvColor:this.vvColor,vvOpacity:this.vvOpacity}}get dotDensity(){return!!this.bit(15)}set dotDensity(t){this.setBit(15,t)}}u.shared=new u(0);class c extends(S(l(h(o(v))))){static load(t){const e=this.shared;return e.data=t,e}static from(t){const e=this.load(0);return e.geometryType=i.MARKER,e.setVV(t,!1),e.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvRotation:this.vvRotation,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}c.shared=new c(0);class d extends(S(l(o(v)))){static load(t){const e=this.shared;return e.data=t,e}static from(t,e){const s=this.load(0);return s.geometryType=i.LINE,s.setVV(t,e),s.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}d.shared=new d(0);class V extends(S(l(h(o(v))))){static load(t){const e=this.shared;return e.data=t,e}static from(t){const e=this.load(t);return e.geometryType=i.TEXT,e.setVV(t,!1),e.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvRotation:this.vvRotation,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}V.shared=new V(0);class p extends(o(v)){static load(t){const e=this.shared;return e.data=t,e}static from(t,e){const s=this.load(0);return s.geometryType=i.LABEL,s.setVV(t,!1),s.mapAligned=!!a(e),s.data}getVariation(){return{...super.getVariation(),vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}p.shared=new p(0);export{V as E,r as S,c as T,v as c,a as e,n as l,p as m,d as y,u as z};
