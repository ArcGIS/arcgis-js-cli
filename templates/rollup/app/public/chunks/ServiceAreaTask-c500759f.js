import{p as e,y as r,a5 as t,cz as s,c0 as i,aD as a,bO as o,q as l,cf as n,bK as p,aB as u,b0 as c,bM as y,U as f,L as m,cB as d}from"../main.js";import{c as B,n as h,e as g}from"./NAMessage-74834804.js";import"./GPMessage-0b666089.js";function v(e){return e.features.map((r=>{const t=u.fromJSON(e.spatialReference),s=o.fromJSON(r);return c(s.geometry).spatialReference=t,s}))}function P(e){return e.features.map((r=>(r.geometry.spatialReference=e.spatialReference,p(r.geometry))))}let A=class extends n{constructor(e){super(e),this.facilities=null,this.messages=null,this.pointBarriers=null,this.polylineBarriers=null,this.polygonBarriers=null,this.serviceAreaPolylines=null,this.serviceAreaPolygons=null}readFacilities(e){return P(e)}readPointBarriers(e,r){return P(r.barriers)}readPolylineBarriers(e){return P(e)}readPolygonBarriers(e){return P(e)}readIncidents(e,r){return v(r.saPolylines)}readServiceAreaPolygons(e,r){return v(r.saPolygons)}};e([r({type:[t]})],A.prototype,"facilities",void 0),e([s("facilities")],A.prototype,"readFacilities",null),e([r({type:[B]})],A.prototype,"messages",void 0),e([r({type:[t]})],A.prototype,"pointBarriers",void 0),e([s("pointBarriers",["barriers"])],A.prototype,"readPointBarriers",null),e([r({type:[i]})],A.prototype,"polylineBarriers",void 0),e([s("polylineBarriers")],A.prototype,"readPolylineBarriers",null),e([r({type:[a]})],A.prototype,"polygonBarriers",void 0),e([s("polygonBarriers")],A.prototype,"readPolygonBarriers",null),e([r({type:[o]})],A.prototype,"serviceAreaPolylines",void 0),e([s("serviceAreaPolylines",["saPolylines"])],A.prototype,"readIncidents",null),e([r({type:[o]})],A.prototype,"serviceAreaPolygons",void 0),e([s("serviceAreaPolygons",["saPolygons"])],A.prototype,"readServiceAreaPolygons",null),A=e([l("esri.tasks.support.ServiceAreaSolveResult")],A);var b=A;const S=g({accumulateAttributes:{name:"accumulateAttributeNames"},attributeParameterValues:!0,defaultBreaks:!0,facilities:!0,outSpatialReference:{name:"outSR",getter:e=>e.outSpatialReference.wkid},pointBarriers:{name:"barriers"},polylineBarriers:!0,polygonBarriers:!0,restrictionAttributes:{name:"restrictionAttributeNames"},returnPointBarriers:{name:"returnBarriers"},travelMode:!0});let k=class extends(h(d)){constructor(e){super(e),this.url=null}solve(e,r){const t=[],s=[],i={},a={};return e.facilities&&e.facilities.features&&this._collectGeometries(e.facilities.features,s,"facilities.features",i),e.pointBarriers&&e.pointBarriers.features&&this._collectGeometries(e.pointBarriers.features,s,"pointBarriers.features",i),e.polylineBarriers&&e.polylineBarriers.features&&this._collectGeometries(e.polylineBarriers.features,s,"polylineBarriers.features",i),e.polygonBarriers&&e.polygonBarriers.features&&this._collectGeometries(e.polygonBarriers.features,s,"polygonBarriers.features",i),y(s).then((e=>{for(const r in i){const s=i[r];t.push(r),a[r]=e.slice(s[0],s[1])}return this._isInputGeometryZAware(a,t)?this.getServiceDescription():f({dontCheck:!0})})).then((s=>{("dontCheck"in s?s.dontCheck:s.hasZ)||this._dropZValuesOffInputGeometry(a,t);for(const r in a)a[r].forEach(((t,s)=>{e.get(r)[s].geometry=t}));let i={query:{...this.parsedUrl.query,f:"json",...S.toQueryParams(e)}};return(this.requestOptions||r)&&(i={...this.requestOptions,...r,...i}),m(this.parsedUrl.path+"/solveServiceArea",i)})).then((e=>b.fromJSON(e.data)))}_collectGeometries(e,r,t,s){s[t]=[r.length,r.length+e.length],e.forEach((e=>{r.push(e.geometry)}))}};e([r()],k.prototype,"url",void 0),k=e([l("esri.tasks.ServiceAreaTask")],k);var G=k;export default G;
