import"../main.js";import{i as e}from"./RenderingContext-81847018.js";class t{constructor(){this._size=[0,0]}dispose(){this._layerFBOTexture&&(this._layerFBOTexture.dispose(),this._layerFBOTexture=null)}draw(e,t,s){this._createOrResizeResources(e);const{context:r,state:i,pixelRatio:a,painter:o}=e,{size:l}=i,{amount:n}=s,h=[Math.round(a*l[0]),Math.round(a*l[1])],u=r.gl,d=this._layerFBOTexture;r.bindFramebuffer(t),t.copyToTexture(0,0,h[0],h[1],0,0,d),r.setBlendingEnabled(!0),r.setStencilTestEnabled(!1),r.setDepthTestEnabled(!1),r.setClearColor(0,0,0,0),r.clear(u.COLOR_BUFFER_BIT),o.blitTexture(r,d,9728,n)}_createOrResizeResources(t){const{context:s,state:r,pixelRatio:i}=t,{size:a}=r,o=Math.round(i*a[0]),l=Math.round(i*a[1]);this._layerFBOTexture&&this._size[0]===o&&this._size[1]===l||(this._size[0]=o,this._size[1]=l,this._layerFBOTexture?this._layerFBOTexture.resize(o,l):this._layerFBOTexture=new e(s,{target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,wrapMode:33071,samplingMode:9728,flipped:!1,width:o,height:l}))}}export{t as Opacity};
